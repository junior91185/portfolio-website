<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SQL Murder Mystery Project</title>
    <link rel="stylesheet" href="css/styles_iam.css">
    <link rel="stylesheet" href="css/nav.css">
</head>
<body>
    <header class="header">
        <nav class="menu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="projects.html">Projects</a></li>
            </ul>  
        </nav>
    </header>

    <div class="project-container">
        <h1>SQL Murder Mystery</h1>
        <p>
            This project was based on the 
            <a href="https://mystery.knightlab.com/" target="_blank">SQL Murder Mystery</a> challenge.  
            I used Microsoft SQL Server to investigate multiple tables such as 
            <code>crime_scene_report</code>, <code>person</code>, and <code>interview</code> 
            to identify the suspect through logical data analysis.
        </p>

        <h2>Getting Started</h2>
        <p>
            I began by exploring the database structure to understand which tables 
            might contain useful information for the investigation.
        </p>
        <pre><code>SELECT TOP 5 * FROM dbo.crime_scene_report;
SELECT TOP 5 * FROM dbo.person;
SELECT TOP 5 * FROM dbo.interview;
GO
-- (explore.sql)
</code></pre>

        <h2>Initial Discovery</h2>
        <p>
            The first lead came from the crime report recorded on January 15, 2018, in SQL City.  
            Using this information, I joined the <code>person</code> and <code>interview</code> tables 
            to find possible witnesses who lived near the crime scene.
        </p>
        <pre><code>SELECT *
FROM dbo.person p
INNER JOIN dbo.interview i
    ON p.id = i.person_id
WHERE name LIKE 'Annabel%' AND address_street_name = 'Franklin Ave';

SELECT *
FROM dbo.person p
INNER JOIN dbo.interview i
    ON p.id = i.person_id
WHERE address_street_name = 'Northwestern Dr'
  AND address_number = (
      SELECT MAX(address_number)
      FROM dbo.person
      WHERE address_street_name = 'Northwestern Dr'
  );
-- (Witness_Statements.sql)
</code></pre>

        <h2>Following the Clues</h2>
        <p>
            Using information from the interviews, I followed new leads to identify the first suspect.  
            I connected the <code>drivers_liscense</code>, <code>person</code>, and 
            <code>facebook_event_checkin</code> tables to filter by description and event attendance.
        </p>
        <pre><code>SELECT 
    dl.age, dl.hair_color, dl.car_make, dl.car_model,
    p.name, fb.event_name, fb.date
FROM dbo.drivers_liscense dl
INNER JOIN dbo.person p ON dl.id = p.liscense_id
INNER JOIN dbo.facebook_event_checkin fb ON p.id = fb.person_id
WHERE hair_color = 'red'
  AND car_make LIKE 'Tesla%'
  AND date BETWEEN '2017-12-01' AND '2017-12-31';
-- (First_Suspect_J.B.sql)
</code></pre>

        <h2>Second Suspect and Final Connection</h2>
        <p>
            After identifying a second suspect, I verified their activity 
            using check-in records from the fitness club tables.
        </p>
        <pre><code>SELECT 
    ck.check_in_date,
    membership_id,
    m.person_id, 
    p.name, 
    p.address_number,
    i.transcript
FROM dbo.get_fit_now_member m
INNER JOIN dbo.get_fit_now_check_in ck ON m.id = ck.membership_id
INNER JOIN dbo.person p ON m.person_id = p.id
INNER JOIN dbo.interview i ON p.id = i.person_id
WHERE ck.check_in_date = '2018-01-09'
  AND ck.membership_id LIKE '48Z%';
-- (Second_Suspect_M.P.sql)
</code></pre>

        <h2>Database Cleanup</h2>
        <p>
            To maintain consistency, I added foreign key relationships 
            between the tables in the database.
        </p>
        <pre><code>ALTER TABLE dbo.facebook_event_checkin
ADD CONSTRAINT FK_facebook_event_checkin_person
FOREIGN KEY (person_id) REFERENCES dbo.person(id);
-- (add_foreignkeys.sql)
</code></pre>

        <h2>Conclusion</h2>
        <p>
            By combining details from crime reports, interviews, event check-ins, 
            and membership logs, I identified the true culprit and solved the mystery.  
            This project strengthened my SQL skills in querying, joining, 
            and interpreting real-world data structures.
        </p>

        <br>
        <a href="projects.html" class="back-button">‚Üê Back to Projects</a>
        <a href="https://github.com/junior91185/sql-murder-mystery" 
           target="_blank" class="project-link">GitHub</a>
    </div>
</body>
</html>
