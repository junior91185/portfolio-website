<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>SQL Murder Mystery Project</title>
    <link rel="stylesheet" href="css/sql_project.css">
    <link rel="stylesheet" href="css/nav.css">
</head>
<body>
    <header class="header">
        <nav class="menu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="projects.html">Projects</a></li>
            </ul>  
        </nav>
    </header>

    <div class="project-container">
        <h1>SQL Murder Mystery</h1>

        <p>
            A SQL investigation where I analyzed multiple tables to solve a crime. This project shows how I use <strong>SQL</strong> to explore data, connect clues, and draw conclusions.
        </p>

        <h2>Setup</h2>
        <p>
            After loading the provided tables into the database, I first added the missing
            <strong>foreign key constraints</strong> between tables such as <code>person</code>,
            <code>drivers_liscense</code>, <code>facebook_event_checkin</code>,
            <code>get_fit_now_member</code>, and <code>interview</code>.  
            Enforcing <strong>referential integrity</strong> early made later
            <strong>JOIN</strong> operations more reliable and kept the relationships in the data
            consistent with the intended schema.
        </p>

        <h2>Data Familiarization</h2>
        <p>
            Following a data lifecycle mindset, I started with <strong>data discovery</strong> and
            <strong>data profiling</strong>. I used small sample queries to understand each table's
            structure, the meaning of key columns, and how tables related to each other.
            This is a common first step for a data analyst before deeper
            <strong>exploratory analysis</strong> or complex filtering.
        </p>
        <pre><code>-- quick structure/contents sampling
SELECT TOP 5 * FROM dbo.crime_scene_report;
SELECT TOP 5 * FROM dbo.person;
SELECT TOP 5 * FROM dbo.interview;
GO
</code></pre>

        <h2>Finding the Crime</h2>
        <p>
            To identify the time and location of the incident, I queried the
            <code>crime_scene_report</code> table and used a <strong>WHERE</strong> clause
            on the <code>date</code>, <code>type</code>, and <code>city</code> columns
            to isolate the specific murder in SQL City.
        </p>
        <pre><code>SELECT *
FROM dbo.crime_scene_report
WHERE date = '2018-01-15'
  AND type = 'murder'
  AND city = 'SQL City';
</code></pre>

        <h2>Witnesses</h2>
        <p>
            From there, I moved into <strong>witness filtering</strong>. In 
            <code>Witness_Statements.sql</code>, I used an <strong>INNER JOIN</strong> between
            <code>person</code> and <code>interview</code> to locate two important witnesses
            living near the crime scene and to read their statements.
        </p>
        <pre><code>-- witness near Franklin Ave
SELECT *
FROM dbo.person p
INNER JOIN dbo.interview i
    ON p.id = i.person_id
WHERE p.name LIKE 'Annabel%'
  AND p.address_street_name = 'Franklin Ave';

-- witness at the highest address on Northwestern Dr
SELECT *
FROM dbo.person p
INNER JOIN dbo.interview i
    ON p.id = i.person_id
WHERE p.address_street_name = 'Northwestern Dr'
  AND p.address_number = (
      SELECT MAX(address_number)
      FROM dbo.person
      WHERE address_street_name = 'Northwestern Dr'
  );
</code></pre>

        <p>
            These witness interviews gave descriptive clues about the suspect’s activity,
            membership, and behavior. I used those clues as inputs for the next query file.
        </p>

        <h2>First Suspect</h2>
        <p>
            In <code>First_Suspect_J.B.sql</code>, I took the information from the witnesses
            and translated it into more focused filters. I joined 
            <code>get_fit_now_member</code>, <code>get_fit_now_check_in</code>,
            <code>person</code>, <code>drivers_liscense</code>, and <code>interview</code>
            using multiple <strong>INNER JOIN</strong>s.  
            The goal was to identify a specific person whose gym activity and details
            matched the witness clues.
        </p>
        <pre><code>SELECT 
    ck.check_in_date,
    ck.membership_id,
    m.person_id, 
    p.name, 
    p.liscense_id, 
    dl.plate_number, 
    p.address_number, 
    p.address_street_name, 
    p.ssn,
    i.transcript
FROM dbo.get_fit_now_member m
INNER JOIN dbo.get_fit_now_check_in ck
    ON m.id = ck.membership_id
INNER JOIN dbo.person p
    ON m.person_id = p.id
INNER JOIN dbo.drivers_liscense dl
    ON p.liscense_id = dl.id
INNER JOIN dbo.interview i
    ON p.id = i.person_id
WHERE 
    ck.check_in_date = '2018-01-09' 
    AND ck.membership_id LIKE '48Z%';
GO
</code></pre>

        <p>
            This query surfaces the first suspect by combining witness information with
            membership patterns, license data, and interview transcripts.
        </p>

        <h2>Second Suspect</h2>
        <p>
            To confirm the final culprit, I also analyzed event attendance and driver data.
            Using <strong>INNER JOIN</strong> across <code>drivers_liscense</code>,
            <code>person</code>, and <code>facebook_event_checkin</code>, and applying
            a <strong>WHERE</strong> filter on appearance, car details, and a concert date range,
            I narrowed down to a second suspect whose movements and attributes matched the full
            set of clues.
        </p>
        <pre><code>SELECT 
    dl.age,
    dl.hair_color,
    dl.car_make,
    dl.car_model,
    p.name,
    fb.event_name,
    fb.date
FROM dbo.drivers_liscense dl
INNER JOIN dbo.person p
    ON dl.id = p.liscense_id
INNER JOIN dbo.facebook_event_checkin fb
    ON p.id = fb.person_id
WHERE dl.hair_color = 'red'
  AND dl.car_make LIKE 'Tesla%'
  AND fb.date BETWEEN '2017-12-01' AND '2017-12-31';
</code></pre>

        <p>
            This second suspect is the final suspect and the killer.  
            All available evidence, from addresses and license records to concert check-ins,
            gym visits, and interview transcripts comes down on this one individual.
        </p>

        <h2>Outcome and Takeaways</h2>
        <p>
            This project walked through several stages of the <strong>data lifecycle</strong>:
            discovery, understanding, integration, and validation.  
            By combining <strong>SQL</strong> concepts like <strong>INNER JOIN</strong>,
            <strong>subqueries</strong>, <strong>filters</strong> with 
            <strong>WHERE</strong> and <strong>BETWEEN</strong>, and enforcing
            <strong>foreign keys</strong>, I was able to turn scattered tables into a coherent
            story and correctly identify the killer.
        </p>

        <br />
        <a href="projects.html" class="back-button">← Back to Projects</a>
        <a href="https://github.com/junior91185/sql-murder-mystery"
           target="_blank" class="project-link">GitHub</a>
    </div>
</body>
</html>
